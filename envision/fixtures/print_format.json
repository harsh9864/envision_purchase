[
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": ".print-format .table-bordered,\n.print-format .table-bordered > thead > tr > th,\n.print-format .table-bordered > tbody > tr > th,\n.print-format .table-bordered > tfoot > tr > th,\n.print-format .table-bordered > thead > tr > td,\n.print-format .table-bordered > tbody > tr > td,\n.print-format .table-bordered > tfoot > tr > td {\n\tborder: 1px solid black;\n}\n.print-format td, .print-format th {\n    vertical-align: top !important;\n    padding: 2px !important;\n}\nh1, .h1, h2, .h2, h3, .h3 {\n    margin-top: 5px;\n    margin-bottom:5px;\n}\nh1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {\n    font-family: inherit;\n   \n    line-height: 0.9em;\n    color: inherit;\n}",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Supplier Quotation",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "<html>\n       \n       \n             <div id=\"header-html\"  class=\"hidden-pdf\" style=\"border-right:1px solid black\">\n    <div class=\"letter-head\">\n        {% if letter_head and not no_letterhead -%}\n            {% if print_settings.repeat_header_footer %}\n                <div>{{ letter_head }}</div>\n            {%- endif %}\n        {%- endif %}\n    \n</div></div>   \n   \n    <body>\n           \n    \n       <center> <h3>Recommendation Sheet</h3> </center>\n        {% if doc.workflow_state != \"Prepared\" %}\n        {% set currency_symbol = frappe.db.get_value(\"Currency\",doc.currency,'symbol') %}\n       {% set a = namespace(initial_amount=0, initial_amount_tax=0 , tax_amount =0,total_tax=0,basic_tax_amount=0,basic_amount_tax=0,total_supplier_rate=0) %}\n\n{% set b = namespace(budget_name='', budget_amount=0, gst_rate=0, budget_total=0, purchase_total=0, budget_item='',supplier_qut_amt=[], budget_sum = 0) %}\n{% set displayed_groups = [] %}\n{% set displayed_items = [] %}\n{% set displayed_amt = [] %}\n                     \n<table class=\"table-bordered\" > \n<tr> \n<td colspan=\"4\">\n<center>\n<h4>{{ doc.company }}</h4>\n</center>\n</td> \n</tr> \n<tr> \n<td colspan=\"2\" class=\"text-right\">\n<b>Customer</b>\n</td>\n <td colspan=\"2\">\n{% if doc.project %}\n{% set customers = {} %} \n {% set customer = frappe.db.get_value(\"Project\", doc.project, \"customer\") %}\n    {% if customer %}\n        {% set customer_name = frappe.db.get_value(\"Customer\", customer, \"customer_name\") or '' %}\n        {% if customer_name %}\n            {% set _ = customers.update({doc.project: customer_name}) %}\n        {% endif %}\n    {% endif %}\n{% else%}\n{% set customers = {} %} \n{% for item in doc.items %}\n    {% set customer = frappe.db.get_value(\"Project\", item.project, \"customer\") %}\n    {% if customer %}\n        {% set customer_name = frappe.db.get_value(\"Customer\", customer, \"customer_name\") or '' %}\n        {% if customer_name %}\n            {% set _ = customers.update({item.project: customer_name}) %}\n        {% endif %}\n    {% endif %}\n{% endfor %}\n{% endif %}\n{{ customers.values() | join(', ') }}\n\n </td>\n  </tr> \n  <tr> \n  <td colspan=\"2\" class=\"text-right\">\n  <b>Project Name</b>\n  </td> \n  <td colspan=\"2\">\n{% if doc.project %}\n {% set project_names = {} %}  <!-- Dictionary to store unique customers per project -->\n\n    {% set project_name = frappe.db.get_value(\"Project\", doc.project, \"project_name\") %}\n    {% if project_name %}\n      \n            {% set _ = project_names.update({doc.project: project_name}) %}\n        \n{% endif %}\n{% else %}\n {% set project_names = {} %}  <!-- Dictionary to store unique customers per project -->\n{% for item in doc.items %}\n    {% set project_name = frappe.db.get_value(\"Project\", item.project, \"project_name\") %}\n    {% if project_name %}\n      \n            {% set _ = project_names.update({item.project: project_name}) %}\n        \n    {% endif %}\n{% endfor %}\n{% endif %}\n<!-- Print the unique customers, separated by commas -->\n{{ project_names.values() | join(', ') }}\n\n  </td> \n  </tr> \n  <tr> \n  <td colspan=\"2\" class=\"text-right\">\n  <b>Title</b>\n  </td> \n  <td colspan=\"2\">{{ doc.custom_title or ' ' }}</td> \n  </tr>\n   <tr> \n   <td colspan=\"2\" class=\"text-right\"><b>Project No.</b></td> \n   <td> {% if doc.project %}\n {% set project_nos = {} %}  <!-- Dictionary to store unique customers per project -->\n\n    \n\n      \n            {% set _ = project_nos.update({doc.project: doc.project}) %}\n        \n \n\n{% else %}\n{% set project_nos = {} %}  <!-- Dictionary to store unique customers per project -->\n{% for item in doc.items %}\n    \n    {% if item.project %}\n      \n            {% set _ = project_nos.update({item.project: item.project}) %}\n        \n    {% endif %}\n{% endfor %}\n{% endif %}\n<!-- Print the unique customers, separated by commas -->\n{{ project_nos.values() | join(', ') }}</td> \n   <td class=\"text-right\"><b>Revision No</b> : 0</td>\n   \n     </tr> \n     <tr> \n     <td colspan=\"2\" class=\"text-right\"><b>Document No</b></td>\n      <td>{{ doc.name }}</td>\n       <td class=\"text-right\"><b>Date</b> : {{ doc.get_formatted('transaction_date') }}</td>\n      \n        </tr>\n        <tr> \n        <td colspan=\"4\"></td> \n        </tr>\n         <tr> \n         <th style=\"text-align:center;\">Sr.No</th>\n         <th colspan=\"2\" style=\"width:60%;text-align:center;font-size:12px;font-weight:bold\">Details/Query </th>\n          <th style=\"text-align:center;font-size:12px\">Answers </th> \n         \n          </tr> \n          <tr>\n           <td style=\"text-align:center;\"><b>a</b></td> \n           <td><b>Recommended Vendor</b></td>\n         <td>\n             {% if doc.custom_request_for_quotation %}\n    {% set rfq_doc = frappe.get_doc(\"Request for Quotation\", doc.custom_request_for_quotation) %}\n    {% for supplier in rfq_doc.suppliers %}\n        {{ supplier.supplier_name }}, <!-- Adjust the field name as per your child table fields -->\n    {% endfor %}\n    {% endif %}\n</td>\n\n             <td><b> {{ doc.supplier_name }} </b></td>\n            \n              </tr> \n              <tr> \n              <td rowspan=\"3\" style=\"text-align:center;\">\n              <b>b</b>\n              </td>\n               <td rowspan=\"3\"><b>Initial offer amount (Recommended Vendor)</b></td>\n                <td>Basic Cost </td> \n                <td class=\"text-right\">{% for item in doc.items %} {% set a.initial_amount = a.initial_amount +  (item.custom_supplier_rate * item.qty ) %} {% endfor %}    {{ frappe.utils.fmt_money(a.initial_amount or 0, currency=currency_symbol) }}<b>\n                </b></td> \n                </tr> \n                <tr> \n                 <td>Tax </td> \n               <td class=\"text-right\"> \n{% for item in doc.items %}\n{% set a.total_supplier_rate = a.total_supplier_rate + (item.custom_supplier_rate * item.qty ) %}\n{% endfor %}\n\n    <!-- Fetch and parse the GST breakup -->\n\n    {% set tax_breakup_data = json.loads(get_gst_breakup(doc)) %}\n\n    {% if tax_breakup_data %}\n\n        {% for row in tax_breakup_data %}\n            \n           \n           \n\n            {% for key, value in row.items() %}\n                {% if key not in [\"HSN/SAC\", \"Item\", \"Taxable Amount\"] %}\n                    \n                     \n                    {% if value.tax_rate and value.tax_amount %}\n                        {% set a.tax_amount =  a.tax_amount + value.tax_rate%}\n                        \n                    {% endif %}\n\n                {% endif %}\n            {% endfor %}\n            \n         \n            \n     \n\n        {% endfor %}\n    {% endif %}\n    {% set a.initial_amount_tax = (a.total_supplier_rate * a.tax_amount)/100 %}\n{{ frappe.utils.fmt_money( a.initial_amount_tax  , currency=currency_symbol) }}\n\n</td>\n\n                </tr> \n                <tr> \n                <td><b>Total </b></td> \n                <td class=\"text-right\"><b><b>\n             {{ frappe.utils.fmt_money(a.initial_amount + a.initial_amount_tax, currency=currency_symbol) }}\n</b></b></td> \n               \n                </tr> \n               <tr> \n        <td rowspan=\"2\" style=\"text-align:center;\"><b>c</b></td> \n        <td rowspan=\"2\"><b>Is recommended vendor amount the lowest compared to others?</b></td>\n        <td>Yes / No/Single Vendor</td>\n    \n       {% set supplier_qut_amt_base = frappe.db.get_all(\"Supplier Quotation\",\n    filters={\"custom_request_for_quotation\": doc.custom_request_for_quotation},\n    fields=[\"name\", \"grand_total\"]\n) %}\n\n{% set low = namespace(lowest_total=None, is_lowest=True) %}\n{% set displayed_items = [] %}\n\n<!-- Check if there is only one supplier -->\n{% if supplier_qut_amt_base | length == 0 or supplier_qut_amt_base | length == 1 %}\n    <td class=\"text-center\">Single Vendor</td>\n{% else %}\n    <!-- Append grand_total values to displayed_items list -->\n    {% for lowest in supplier_qut_amt_base %}\n        {% if doc.name != lowest.name %}\n            {% set _ = displayed_items.append(lowest.grand_total) %}\n            {% if low.lowest_total is none or lowest.grand_total < low.lowest_total %}\n                {% set low.lowest_total = lowest.grand_total %}\n            {% endif %}\n        {% endif %}\n    {% endfor %}\n\n    <!-- Check if the recommended vendor has the lowest quotation -->\n    <td class=\"text-center\">\n        {% set recommended_vendor_total = doc.grand_total or 0 %}\n\n        {% if low.lowest_total and recommended_vendor_total > 0 %}\n            {{ \"Yes\" if recommended_vendor_total <= low.lowest_total else \"No\" }}\n        {% else %}\n            No\n        {% endif %}\n    </td>\n{% endif %}\n\n        \n     \n    </tr> \n                   <tr> \n                   <td>If no, reason for higher quotation.</td> \n                   <td>{{ doc.custom_remarks or '' }}</td>\n                   \n                     </tr>\n                    \n{% set displayed_items = [] %}\n{% set displayed_groups = [] %}\n{% set processed_groups = [] %}  <!-- Track processed item groups -->\n\n\n{% set low = namespace(lowest_total=None, is_lowest=True) %}\n\n<!-- Append grand_total values to displayed_items -->\n{% for lowest in supplier_qut_amt_base %}\n    {% if doc.name != lowest.name %}\n        {% set _ = displayed_items.append(lowest.grand_total) %}\n        {% if low.lowest_total is none or lowest.grand_total < low.lowest_total %}\n            {% set low.lowest_total = lowest.grand_total %}\n        {% endif %}\n    {% endif %}\n{% endfor %}\n\n\n\n\n                      <tr> \n                    \n                       \n                    {% for item in doc.items %}  {% set b.gst_rate = (frappe.db.get_value(\"Item Tax Template\", item.item_tax_template, \"gst_rate\") or 0)  %} {% endfor %}\n                      <td  style=\"text-align:center;\" rowspan=\"2\"><b>d</b></td>\n                      \n    <td rowspan=\"2\"><b>Budget amount</b></td>\n    <td>Total Budget</td>\n    <td class=\"text-right\">\n        \n      \n        <b>   {{ frappe.utils.fmt_money( doc.custom_total_budget, currency=currency_symbol) }}</b>\n    </td>\n\n </tr> \n                  <tr> \n                    \n                       \n                    {% for item in doc.items %}  {% set b.gst_rate = (frappe.db.get_value(\"Item Tax Template\", item.item_tax_template, \"gst_rate\") or 0)  %} {% endfor %}\n                  \n                      \n   \n    <td>Remaining Budget</td>\n    <td class=\"text-right\">\n        \n       \n        <b>   {{ frappe.utils.fmt_money( doc.custom_remaining_budget, currency=currency_symbol) }}</b>\n    </td>\n\n </tr> \n \n <tr> \n <td rowspan=\"3\" style=\"text-align:center;\"><b>e</b></td> \n\n <td rowspan=\"3\"><b>Purchase Order value </b></td> \n <td>Basic Cost</td> <td class=\"text-right\">    {{ frappe.utils.fmt_money(doc.total or 0 , currency=currency_symbol) }} </td> \n \n  </tr>\n   <tr>\n    <td>Tax</td> \n    <td class=\"text-right\"> \n {% set tax_breakup_data = json.loads(get_gst_breakup(doc)) %}\n\n    {% if tax_breakup_data %}\n\n        {% for row in tax_breakup_data %}\n            \n            <!-- Calculate tax only once per item -->\n           \n\n            {% for key, value in row.items() %}\n                {% if key not in [\"HSN/SAC\", \"Item\", \"Taxable Amount\"] %}\n                    \n                    <!-- Calculate tax amount -->\n                    {% if value.tax_rate and value.tax_amount %}\n                        {% set a.basic_tax_amount =  a.basic_tax_amount + value.tax_amount  %}\n                     \n                       \n                    {% endif %}\n\n                {% endif %}\n            {% endfor %}\n            \n         \n          \n     \n\n        {% endfor %}\n    {% endif %}\n\n\n\n\n{{ frappe.utils.fmt_money(a.basic_tax_amount, currency=currency_symbol) }}\n\n\n</td>\n  \n      </tr>\n       <tr> \n       <td><b>Total </b></td> \n       <td class=\"text-right\" style=\"font-weight:bold\">{{ frappe.utils.fmt_money(doc.grand_total or 0, currency=currency_symbol) }}</b></b></td> \n        \n         </tr>\n      \n          <tr>\n           <td rowspan=\"2\" style=\"text-align:center;\"><b>f</b></td>\n            <td rowspan=\"2\"><b>Is actual cost under the budget</b></td>\n             <td>Yes/ No</td>\n              <td style=\"text-align:center\">{% if doc.total < doc.custom_remaining_budget|float %}\n              Yes \n              {% else %} No {% endif %}</td>\n              \n               </tr> \n               <tr> \n               <td>If No. </td> \n               <td>{{ doc.custom__reason_for_over_budget or '' }}</td> \n             \n                \n                  {% set num = 0 %}\n                  {% for item in doc.taxes %}\n                  {% if item.included_in_print_rate == 1 %}\n      </tr>     \n         \n<tr> \n          <td style=\"text-align:center;\">{{ num + 1 }}</td>\n           <td>{{ item.description or ' '  }}</td>\n            <td></td> \n            <td>Inclusive</td>\n           \n             </tr>         \n             {% endif %}\n             {% endfor %}                                          \n<tr>\n             <td  style=\"text-align:center;\"><b>g</b></td>\n             <td><b>Incoterm</b></td>\n             <td style=\"text-align:center\">{{ doc.incoterm or '' }}</td>\n             <td style=\"text-align:center\">{{ doc.named_place or '' }}</td>\n         </tr>\n<tr> \n<td rowspan=\"1\" style=\"text-align:center;\"><b>h</b></td>\n<td rowspan=\"\"><b>Is scope of supply in accordance with PO/WO by client?</b></td>\n<td >If scope of supply is not in accordance with PO/Wo By Client.</td>\n<td>{{ doc.custom_if_reason_for_scope_deviation or '' }}</td>\n\n</tr>\n\n\n \n\n\n<tr> \n<td style=\"text-align:center;\"><b>i</b></td>\n<td colspan=\"1\"><b>Payment Terms </b></td>\n<td></td>\n<td class=\"text-center\"> {{ doc.custom_payment_terms or '' }}</td>\n\n</tr>\n<tr> \n<td style=\"text-align:center;\"><b>j</b></td> \n<td colspan=\"1\"><b>Delivery Period </b></td> \n<td></td>\n<td class=\"text-center\">{{ doc.custom_delivery_terms or '' }}</td>\n\n</tr>\n<tr> \n<td rowspan=\"1\" style=\"text-align:center;\">1</td>\n<td rowspan=\"1\">Is the delivery period accordance to the execution schedule ?</td>\n <td>If the delivery period is not accordance to the executation schedule.</td>\n  <td>{{ doc.custom_reasn_for_deliverycompletion_deviation or '' }}</td>\n\n   </tr> \n  <tr>\n      <td></td>\n      <td><b><center>Submitted By</center></b></td>\n      <td><b><center>Reviwed By</center></b> </td>\n      <td ><b><center>Approved By</center></b></td>\n  </tr>\n  <tr>\n  <td></td>\n  <td>\n    <center>\n      {% set submit_name = frappe.db.get_value(\"Comment\", {\"comment_type\": \"Workflow\", \"reference_name\": doc.name, \"content\": \"Submitted\"}, \"comment_email\") %}\n      {{ frappe.db.get_value(\"User\",submit_name,\"full_name\") or ' '}}\n    </center>\n  </td>\n  <td><center> {% set review_name = frappe.db.get_value(\"Comment\", {\"comment_type\": \"Workflow\", \"reference_name\": doc.name, \"content\": \"Reviewed\"}, \"comment_email\") %}\n      {{ frappe.db.get_value(\"User\",review_name,\"full_name\") or ' ' }}</center></td>\n  <td ><center>{% set approve_name = frappe.db.get_value(\"Comment\", {\"comment_type\": \"Workflow\", \"reference_name\": doc.name, \"content\": \"Approved\"}, \"comment_email\") %}\n      {{ frappe.db.get_value(\"User\",approve_name,\"full_name\") or ' '}}</center></td>\n</tr>\n\n    \n              </table> \n                                                                                              \n{% endif %}\n  \n    </body>\n      <div class=\"letter-head-footer\">\n       {% if letter_head and not no_letterhead -%}\n            {% if print_settings.repeat_header_footer %}\n                <div>{{ footer }}</div>\n            {%- endif %}\n        {%- endif %}\n\n</div>\n    \n</div>\n      \n         \n</html>",
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2025-04-28 10:59:01.255253",
  "module": "Envision",
  "name": "Recommendation Sheet",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n.table, th, td {\n    border: 1px solid black;\n}\n table, tr, td, th {\n      page-break-inside: avoid;\n    }\n .table {\n      width: 100%;\n      border-collapse: collapse;\n      border: 1px solid black;\n    }\n.ql-editor {\n    font-family: var(--font-stack);\n    color: var(--text-color);\n    line-height: 0.9;\n    overflow-wrap: break-word;\n    white-space: pre-wrap;\n}\n.print-format td, .print-format th {\n   padding-right:1px !important;\n   padding-left:1px !important;\n   padding-bottom: 1px !important;\n   padding-top: 1px !important;\n}\n\n\n.print-format .row:not(.section-break) {\n    line-height: 1;\n    margin-top: 0.5px !important;\n}\n.print-format .table-bordered th {\n    border: 1px solid black;\n}\n\n\n\n.print-format th {\n    color: black;\n    font-weight: bold;\n    border-bottom-width: 1px !important;\n}\n\n.print-format p {\n    margin: 1px 3px 1px;\n}\n\n\n\n.print-heading {\n    display: none;\n}\n body {\n        \n      \n       \n        box-sizing: border-box; /* Ensure padding is included in width/height */\n    }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@page {\n    size: A4 portrait;\n    margin: 10mm;\n    margin-bottom: 10px;\n    border:1px solid black\n}\n\n",
  "custom_format": 1,
  "default_print_language": "en",
  "disabled": 1,
  "doc_type": "Purchase Order",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": null,
  "html": "<html>\n  \n        <table style=\"font-size:14px;border-collapse: collapse;\">\n             <tr>\n            <td colspan=\"5\" id=\"header-html\"  class=\"hidden-pdf\" style=\"border-right:1px solid black\">\n    <div class=\"letter-head\">\n        {% if letter_head and not no_letterhead -%}\n            {% if print_settings.repeat_header_footer %}\n                <div>{{ letter_head }}</div>\n            {%- endif %}\n        {%- endif %}\n    \n</div></td>\n        </tr>\n        \n    <tr>\n        <td colspan=\"5\" id=\"footer-html\"  class=\"mt-5\">\n            <div class=\"letter-head-footer\">\n       {% if letter_head and not no_letterhead -%}\n           {% if print_settings.repeat_header_footer %}\n\t\n\t\t{% if not no_letterhead and footer %}\n\t\t\n\t\t{% endif %}\n\t\t<p class=\"text-center  page-number \">\n\t\t\t{{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n\t\t</p>\n\n\t{% endif %}\n           \n        {%- endif %}\n\n</div>\n    \n            </td>\n    </tr>\n        </table>\n    <table  class=\"table-bordered\">\n         <tr>\n                 <td colspan=\"3\">\n                     <div class=\"row\">\n                         <div class=\"col-xs-4\">\n                             <img src=\"/files/Envision Logo.svg\" style=\"max-width: 100%; height: auto;\">\n                         </div>\n                         <div class=\"col-xs-8\">\n                             <center><h4>{{ doc.company or '' }}</h4></center>\n                                {% if doc.billing_address %}\n                 {% set bill_add = frappe.get_doc('Address',doc.billing_address) if doc.billing_address else None %}\n             {{ bill_add.address_line1 }},{{ bill_add.address_line2 }},{{ bill_add.city }},{{ bill_add.state }},{{ bill_add.pincode }}\n                         </div>\n                     </div>\n                    \n               \n             </td>\n               \n                <td colspan=\"2\"> <table style=\"border:hidden\">\n                    <tr style=\"border:hidden\">\n                        <td style=\"border:hidden\">Phone</td>\n                        <td style=\"border:hidden\">:</td>\n                        <td style=\"border:hidden\">{{ bill_add.phone }}</td>\n                    </tr>\n                     <tr style=\"border:hidden\">\n                        <td style=\"border:hidden\">Website</td>\n                        <td style=\"border:hidden\">:</td>\n                        <td style=\"border:hidden\">en-vision.in</td>\n                    </tr>\n                    <tr style=\"border:hidden\">\n                        <td style=\"border:hidden\">GST NO</td>\n                        <td style=\"border:hidden\">:</td>\n                        <td style=\"border:hidden\">{{ bill_add.gstin }}</td>\n                    </tr>\n                    <tr style=\"border:hidden\">\n                        <td style=\"border:hidden\">PAN NO</td>\n                        <td style=\"border:hidden\">:</td>\n                        <td style=\"border:hidden\">{{ frappe.db.get_value(\"Company\",doc.company,\"pan\")}}</td>\n                    </tr>\n                </table></td>\n                 {% endif %}\n            </tr>\n            <tr>\n                <td colspan=\"5\">\n                    <h4 class=\"text-center\">Purchase Order</h4>\n                </td>\n            </tr>\n            <tr>\n                <td colspan=\"2\" width=\"50%\">\n                 <table style=\"border:hidden\"> \n                     <tr style=\"border:hidden\">\n                         <td style=\"border:hidden\">Vendor Code</td>\n                         <td style=\"border:hidden\">:</td>\n                         <td style=\"border:hidden\">{{ doc.supplier or '' }}</td>\n                         <td style=\"border:hidden\">GST No.</td>\n                         <td style=\"border:hidden\">:</td>\n                         <td style=\"border:hidden\">{{ doc.supplier_gstin or \"\" }}</td>\n                     </tr>\n                     <tr><td colspan=\"6\" style=\"border:hidden\">{{ doc.supplier_name }} </td></tr>\n                      {% if doc.supplier_address %}\n                 {% set supplier_add = frappe.get_doc('Address',doc.supplier_address) if doc.supplier_address else None %}\n                     <tr>\n                         <td colspan=\"6\" style=\"border:hidden\"> {{ supplier_add.address_line1 }},{{ supplier_add.address_line2 }},{{ supplier_add.city }}-{{ supplier_add.pincode }},{{ supplier_add.country }}-{{ supplier_add.state }}</td>\n                     </tr>\n                     {% endif %}\n                 </table>\n                </td>\n                   <td colspan=\"3\" >\n                   <table>\n                       <tr>\n                           <td style=\"border:hidden\">P.O. No</td>\n                           <td style=\"border:hidden\">:</td>\n                           <td style=\"border:hidden\">{{ doc.name or '' }}</td>\n                           <td style=\"border:hidden\">Date</td>\n                           <td style=\"border:hidden\">:</td>\n                           <td style=\"border:hidden\">{{ doc.get_formatted(\"transaction_date\") }}</td>\n                       </tr>\n                       <tr>\n                           <td colspan=\"6\" style=\"border:hidden\">\n                               <b>Billing & Delivery Address :</b>\n                           </td>\n                       </tr>\n                       {% if doc.shipping_address %}\n                 {% set ship_add = frappe.get_doc('Address',doc.shipping_address) if doc.shipping_address else None %}\n                     <tr>\n                         <td colspan=\"6\" style=\"border:hidden\"> {{ ship_add.address_line1 }},{{ ship_add.address_line2 }},{{ ship_add.city }}-{{ ship_add.pincode }},{{ ship_add.country }}-{{ ship_add.state }}</td>\n                     </tr>\n                     {% endif %}\n                   </table>\n                </td>\n            </tr>\n            <tr>\n                <th class=\"text-center\" width:\"10%\">SR.No</th>\n                <th class=\"text-center\" width:\"40%\">MATERIAL/REQUISITION</th>\n                <th class=\"text-center\" width:\"10%\"><p>DELIVERY</p>\n                <p>DATE</p>\n                <p>QUANTITY</p>\n                <p>UOM</p></th>\n                <th class=\"text-center\" width:\"20%\">UNIT PRICE INR</th>\n                <th class=\"text-center\" width:\"20%\">AMOUNT INR</th>\n            </tr>\n            {% for item in doc.items %}\n            <tr>\n                <td class=\"text-center\">{{ item.idx }}</td>\n                <td ><p>{{ item.item_code }}</p><p>{{ item.description }}</p></td>\n                <td class=\"text-right\"><p>{{ item.get_formatted(\"schedule_date\") }}</p><p>{{ item.qty }}</p><p>{{ item.uom }}</p></td>\n                <td class=\"text-right\">{{ item.get_formatted(\"rate\") }}</td>\n                <td class=\"text-right\">{{ item.get_formatted(\"amount\") }}</td>\n            </tr>\n            {% endfor %}\n             <tr>\n                <td colspan=\"4\" class=\"text-right\">Total Basic</td>\n                <td class=\"text-right\">{{ doc.get_formatted(\"total\") or \"\" }}</td>\n            </tr>\n            {% for item in doc.taxes %}\n            <tr>\n                <td colspan=\"4\" class=\"text-right\">{{ item.description }}</td>\n                <td class=\"text-right\">{{ item.get_formatted(\"tax_amount\") }}</td>\n            </tr>\n            {% endfor %}\n             <tr>\n                <td colspan=\"4\" class=\"text-right\"><b>Grand Total</b></td>\n                <td class=\"text-right\">{{ doc.get_formatted(\"rounded_total\") or \"\" }}</td>\n            </tr>\n            <tr>\n                <td colspan=\"5\">\n                    In Words : {{ doc.in_words or '' }}\n                </td>\n            </tr>\n            <tr>\n                <td Colspan=\"5\"><b><u>Payment Terms:-</u></b></td>\n            </tr>\n            <tr>\n                <th>No.</th>\n                <th >Payment Term</th>\n                <th colspan=\"2\">Description</th>\n                <th>Invoice Portion</th>\n            </tr>\n            {% for item in doc.payment_schedule %}\n            <tr>\n                <td>{{ item.idx }}</td>\n                <td >{{ item.payment_term or \"\" }}</td>\n                <td colspan=\"2\"> {{ item.description or \"\" }}</td>\n                <td>{{ item.get_formatted(\"invoice_portion\") }}</td>\n            </tr>\n            {% endfor %}\n            <tr>\n                <td colspan=\"5\"> <b><u>Special Terms :-</u></b></td>\n            </tr>\n           \n     <tr>\n <tr>\n    <td colspan=\"5\" style=\"border:1px solid black; border-collapse: collapse;\">\n        <div>\n            {{ frappe.db.get_value(\"Terms and Conditions\", doc.tc_name, \"terms\") }}\n        </div>\n    </td>\n</tr>\n\n\n                <td colspan=\"5\"> <b><u>General Terms :-</u></b></td>\n            </tr>\n           \n            <tr><td colspan=\"5\">  <div style=\"page-break-after: auto; page-break-before: auto; white-space: pre-wrap; word-wrap: break-word;\">\n                {{ doc.custom_general_terms_and_condition or \"\" }} </div></td></tr>\n            <tr>\n                <td colspan=\"5\">\n                <div class=\"row\">\n                    <div class=\"col-xs-6\">\n                        \n                        <p>You are requested to provide formal acceptance of this purchase order within 7 days from receipt or it shall be considered as deemed accepted.</p>\n                    </div>\n                    <div class=\"col-xs-6\">\n                    <center><b>For {{ doc.company or '' }}</b></center>\n                    </div>\n                </div>\n                <div class=\"row\">\n                    <div class=\"col-xs-6 mt-3\">\n                        <p> Vendor's Authorized Signature & Seal</p>\n                    </div>\n                    <div class=\"col-xs-6 mt-3\">\n                    <center> (Authorized Signatory)\n                   <p>{% set user_id = frappe.db.get_value(\"Comment\", {'reference_name': doc.name, 'content': \"Approved\"}, \"comment_email\") %} {{ frappe.db.get_value(\"User\",user_id,'full_name') or ''}}</p>\n</center>\n                    </div>\n                </div>\n             <div class=\"mt-3\">   This Purchase Order is a computer generated document and is electronically approved. This does not require\nsignature.</div>\n                </td>\n            </tr>\n   \n    </table>\n    \n</html>",
  "line_breaks": 0,
  "margin_bottom": 15.0,
  "margin_left": 15.0,
  "margin_right": 15.0,
  "margin_top": 15.0,
  "modified": "2025-02-24 13:40:47.592898",
  "module": "Envision",
  "name": "Purchase Order",
  "page_number": "Hide",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 0,
  "standard": "No"
 },
 {
  "absolute_value": 0,
  "align_labels_right": 0,
  "css": "\n.table > caption + thead > tr:first-child > th, .table > colgroup + thead > tr:first-child > th, .table > thead:first-child > tr:first-child > th, .table > caption + thead > tr:first-child > td, .table > colgroup + thead > tr:first-child > td, .table > thead:first-child > tr:first-child > td {\n    border-top: 0;\n    text-align: center;\n    line-height: 0.9;\n    border:1px solid black;\n    font-weight:bold;\n}\n.print-heading {\n    text-align: left;\n    text-transform: none;\n   color:solid black;\n    padding-bottom: 5px;\n    margin-bottom: 5px;\n    font-weight:bold;\n    border-bottom:none;\n   font-size: 16px;\n    font-family: Arial, sans-serif;\n}\n\n.print-format .table-bordered td, .print-format .table-bordered th {\n    border: 1px solid black;\n    line-height: 0.9;\n}\n.print-format .table-bordered th {\n    border: 1px solid black;\n    line-height: 0.9;\n}\n.print-format th {\n    color: black;\n    font-weight: bold;\n    line-height:0.9;\n    text-align:center;\n    border-bottom-width: 1px !important;\n}\n.print-format table td .value {\n    font-size: 12px;\n    line-height:0.9;\n}\n.print-format .row:not(.section-break) {\n    line-height: 1.2;\n    margin-top: 3px !important;\n}\n.print-format label {\n    font-weight: bold;\n    font-size: 13px;\n    color:black;\n    margin-bottom: 0;\n}\n.print-format td, .print-format th {\n    padding: 5px !important;\n}\n.print-format .letter-head {\n    margin-bottom: 1px;\n}\nh4, .h4, h5, .h5, h6, .h6 {\n    margin-top: 5px;\n    margin-bottom: 5px;\n}\n\n\n[data-fieldname=\"payment_schedule\"] .table-sr { text-align: center; }\n[data-fieldname=\"terms\"] .ql-snow { padding: 1px; }",
  "custom_format": 0,
  "default_print_language": "en",
  "disabled": 0,
  "doc_type": "Purchase Order",
  "docstatus": 0,
  "doctype": "Print Format",
  "font": null,
  "font_size": 14,
  "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\"><small class=\\\"sub-heading\\\">PO No. : {{ doc.name }}</small>\\t</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-xs-6\\\">\\n    <h2><div>Purchase Order</div></h2>\\n  \\n</div>\\n\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"font-size: 13px;font-weight: 600;color: #192734;line-height: 1.2\\\">{{ doc.supplier_name }}</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<p>{{ doc.address_display or '' }}</p>\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"transaction_date\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"PO Date\"}, {\"fieldname\": \"schedule_date\", \"print_hide\": 0, \"label\": \"Required By\"}, {\"fieldname\": \"supplier_gstin\", \"print_hide\": 0, \"label\": \"Supplier GSTIN\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set filtered_items = [] %}\\n{% for item in doc.items %}\\n    {% if item.supplier_quotation %}\\n        {% set _ = filtered_items.append(item) %}\\n    {% endif %}\\n{% endfor %}\\n\\n<div><b>Reference</b>:\\n {% for supplier_quotation, items in filtered_items|groupby('supplier_quotation') %}\\n       {{ frappe.db.get_value(\\\"Supplier Quotation\\\",supplier_quotation,\\\"quotation_number\\\") or '' }}\\n        {% endfor %}</div>\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<table class=\\\"table table-bordered table-condensed\\\">\\n    <tr>\\n        <th style=\\\"width: 40px\\\" class=\\\"table-sr\\\">Sr</th>\\n      <th style=\\\"width: 300px;\\\" class=\\\"\\n\\t\\\" data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\tDescription</th>\\n     <th style=\\\"width: 80px;\\\" class=\\\"\\n\\ttext-right\\\" data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\tQuantity</th>\\n       <th style=\\\"width: 80px;\\\" class=\\\"\\n\\ttext-right\\\" data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\tRate</th>\\n      <th style=\\\"width: 80px;\\\" class=\\\"\\n\\ttext-right\\\" data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\tAmount</th>\\n    </tr>\\n{% for item in doc.items %}\\n   <tr>\\n        <td>{{ item.idx}}</td>\\n        <td><p>{{ item.item_code }}</p>\\n        <p>{{ item.description or '' }}</p></td>\\n        <td><div class=\\\"row\\\"><div class=\\\"col-xs-6\\\">{{ item.qty }}</div> <div class=\\\"col-xs-6\\\">{{item.uom }}</div></div> </td>\\n        <td class=\\\"text-right\\\">{{ item.get_formatted(\\\"rate\\\")  }}</td>\\n        <td class=\\\"text-right\\\">{{ item.get_formatted(\\\"amount\\\") }}</td>\\n    </tr>\\n{% endfor %}\\n<tr>\\n    <td colspan=\\\"2\\\"><b>Total</b></td>\\n    <td > {{ doc.total_qty or 0 }}</td>\\n    <td></td>\\n    <td class=\\\"text-right \\\"><b>{{ doc.get_formatted(\\\"total\\\") }}</b></td>\\n</tr>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div>\\n    <b>In Words : </b> {{ frappe.utils.money_in_words(doc.total) }}\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"incoterm\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Incoterm\"}, {\"fieldname\": \"named_place\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Named Place\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"billing_address_display\", \"print_hide\": 0, \"align\": \"left\", \"label\": \"Billing Address Details\"}, {\"fieldname\": \"company_gstin\", \"print_hide\": 0, \"label\": \"Company GSTIN\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"shipping_address_display\", \"print_hide\": 0, \"label\": \"Shipping Address Details\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Payment Schedule\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div class=\\\"row section-break\\\" data-label=\\\"\\\">\\n\\t\\t\\t<div class=\\\"col-xs-12 column-break\\\">\\n\\t\\t\\t\\n\\t\\t\\t\\t<div data-fieldname=\\\"payment_schedule\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t<table class=\\\"table table-bordered table-condensed\\\">\\n\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<th style=\\\"width: 40px\\\" class=\\\"table-sr\\\">Sr</th>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th style=\\\"width: 150px;\\\" class=\\\"\\n\\t\\\" data-fieldname=\\\"payment_schedule\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\tPayment Term</th>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th style=\\\"width: 150px;\\\" class=\\\"\\n\\t\\\" data-fieldname=\\\"payment_schedule\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\tDescription</th>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t<th style=\\\"width: 150px;\\\" class=\\\"\\n\\ttext-right\\\" data-fieldname=\\\"payment_schedule\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\tInvoice Portion</th>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t<tbody>\\n\\t\\t\\t\\t\\t{% for item in doc.payment_schedule %}\\n\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<td class=\\\"table-sr\\\">{{ item.idx }}</td>\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\"\\n\\t\\\" data-fieldname=\\\"payment_schedule\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"value\\\">{{ item.payment_term or '' }}\\n\\t</div></td>\\n\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\"\\n\\t\\\" data-fieldname=\\\"payment_schedule\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"value\\\">{{ item.description or '' }}\\n\\t</div></td>\\n\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<td class=\\\"\\n\\ttext-center\\\" data-fieldname=\\\"payment_schedule\\\" data-fieldtype=\\\"Table\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"value\\\">{{ item.invoice_portion or 0 }} %\\n\\t</div></td>\\n\\t\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t</tr>\\n{% endfor %}\\n\\t\\t\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t</tbody>\\n\\t\\t\\t</table>\\n\\t\\t</div>\\n\\t\\t\\t\\n\\t\\t\\t</div>\\n\\t\\t\\n\\t</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Terms & Conditions\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"terms\", \"print_hide\": 0, \"align\": \"right\", \"label\": \"Terms and Conditions\"}, {\"fieldtype\": \"Section Break\", \"label\": \"General Terms &Conditions\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"custom_general_terms_and_condition\", \"print_hide\": 0, \"label\": \"General Terms And Condition\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div>\\n   <h4> For {{ doc.company or '' }} </h4>\\n   \\n   <h5 style=\\\"margin-top:65px\\\">{% set approve_name = frappe.db.get_value(\\\"Comment\\\", {\\\"comment_type\\\": \\\"Workflow\\\", \\\"reference_name\\\": doc.name, \\\"content\\\": \\\"Approved\\\"}, \\\"comment_email\\\") %}\\n      {{ frappe.db.get_value(\\\"User\\\",approve_name,\\\"full_name\\\") or ' '}}</h5>\\n</div>\\n\\n<div class=\\\"mt-4\\\">This is a System-Generated purchase order and does not require a signature.</div>\"}]",
  "html": null,
  "line_breaks": 0,
  "margin_bottom": 5.0,
  "margin_left": 1.0,
  "margin_right": 1.0,
  "margin_top": 5.0,
  "modified": "2025-03-13 15:48:11.359133",
  "module": "Envision",
  "name": "Purchase Order Standard",
  "page_number": "Bottom Center",
  "print_format_builder": 0,
  "print_format_builder_beta": 0,
  "print_format_type": "Jinja",
  "raw_commands": null,
  "raw_printing": 0,
  "show_section_headings": 1,
  "standard": "No"
 }
]